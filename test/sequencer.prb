
[auto_atoms]

[moonbase bs] [sequencer s bs]
[s [1 [busy 4] 1 [impulse 2] 1 [busy 3] 1]]
[s "speed" 40000]

[TestEq "sequencer content" [1 [busy 4.0] 1 [impulse 2.0] 1 [busy 3.0] 1] *x [s *x]]
[TestEq "sequencer busy -2" 0.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy -1" 0.0 *x [MoveCore] [s "busy" *x]]

[s "trigger" 2]
[TestEq "sequencer busy 0" 0.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 1" 1.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 2" 1.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 3" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 4" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 5" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 6" 2.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 7" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 8" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 9" 3.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 10" 3.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 11" 3.0 *x [MoveCore] [s "busy" *x]]

[s "trigger" 1]
[TestEq "sequencer busy 0" 0.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 1" 1.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 2" 1.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 3" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 4" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 5" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 6" 2.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 7" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 8" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 9" 3.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 10" 3.0 *x [MoveCore] [s "busy" *x]]
[TestEq "sequencer busy 11" 3.0 *x [MoveCore] [s "busy" *x]]

[TestEq "sequencer busy 0" 0.0 *x [MoveCore] [s "busy" *x]]

[s] [polysequencer s bs]

[s [1 [busy 4] 1 [impulse 2] 1 [busy 3] 1]]
[s "speed" 40000]

[TestEq "polysequencer content" [1 [busy 4.0] 1 [impulse 2.0] 1 [busy 3.0] 1] *x [s *x]]
[TestEq "polysequencer busy -2" 0.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy -1" 0.0 *x [MoveCore] [s "busy" *x]]

[s "trigger" 2]
[TestEq "polysequencer busy 0" 0.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 1" 1.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 2" 1.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 3" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 4" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 5" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 6" 2.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 7" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 8" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 9" 3.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 10" 3.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 11" 3.0 *x [MoveCore] [s "busy" *x]]

[s "trigger" 1]
[TestEq "polysequencer busy 0" 0.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 1" 1.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 2" 1.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 3" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 4" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 5" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 6" 2.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 7" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 8" 4.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 9" 3.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 10" 3.0 *x [MoveCore] [s "busy" *x]]
[TestEq "polysequencer busy 11" 3.0 *x [MoveCore] [s "busy" *x]]

[TestEq "polysequencer busy 0" 0.0 *x [MoveCore] [s "busy" *x]]

[exit]

